(function(){function p(a){return new Promise(b=>setTimeout(b,a))}function H(a){if(A){a=a.target;let [b,d]=[a.id.split("-")[1],a.id.split("-")[2]];k[b][d].s=!0;g(b,d).classList.add("wall")}}function g(a,b){return document.getElementById("cell-"+a+"-"+b)}function B(){C&&D&&(document.getElementById("start").removeEventListener("click",B),document.getElementById("start").disabled=!0,document.getElementById("visualization_mode").disabled=!0,document.getElementById("visualization_mode").classList.add("hidden"),
document.getElementById("vis_label").classList.add("hidden"),q=!0,I(E),h?p(l*m*2.5).then(()=>r(x)):r(x))}function r(a){a.path=!0;if(0!==a.g||a.l)a.l||(g(a.x,a.y).style.backgroundColor="cadetblue"),h?p(200).then(()=>r(a.m())):r(a.m())}function I(a){let b=1,d=new n;a.i=!0;for(d.o(a);!d.v();){b++;let c=d.u();for(let f of c.j){let e=k[f[0]][f[1]];if(e.l)return;e.g>c.g+f[2]&&e.i&&(e.g=c.g+f[2],h&&p(3*b).then(()=>{g(e.x,e.y).textContent=(c.g+f[2]).toString().substr(0,5)}));e.i||e.s||(e.i=!0,e.B=e.g,e.g=
c.g+f[2],h&&p(2*b).then(()=>{g(e.x,e.y).textContent=(c.g+f[2]).toString().substr(0,5);g(e.x,e.y).style.backgroundColor="orange"}),g(e.x,e.y).style.fontSize="8px",d.o(e))}}}function J(a){!q&&t&&u&&!F&&(l=Number(v.value),m=Number(w.value),v.disabled=!0,w.disabled=!0,a.target.classList.add("hidden"),document.getElementById("start").disabled=!1,document.getElementById("start").classList.remove("hidden"),K(),F=!0)}function L(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&
""!==a.target.value?(t=!0,a=document.getElementById("invalidRows"),"undefined"!=typeof a&&null!=a&&a.remove()):(t&&(a=document.createElement("p"),a.id="invalidRows",a.textContent="Valid range is 1-75 rows",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),t=!1)}function M(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?(u=!0,a=document.getElementById("invalidCols"),
"undefined"!=typeof a&&null!=a&&a.remove()):(u&&(a=document.createElement("p"),a.id="invalidCols",a.textContent="Valid range is 1-75 columns",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),u=!1)}function y(a){A=void 0===a.buttons?1===a.which:1===a.buttons}function K(){for(let a=0;a<m;a++){k.push([]);const b=document.createElement("div");b.id="col-"+a;b.classList.add("col");b.draggable=!1;b.h=function(){return!1};N.appendChild(b);
for(let d=0;d<l;d++){const c=new O(a,d);k[a].push(c);k[a][d].A();const f=document.createElement("div");f.id="cell-"+a+"-"+d;f.classList.add("cell");b.appendChild(f);f.addEventListener("click",()=>c.h())}}}let q=!1,t=!0,u=!0,F=!1,l=30,m=30,G=!0,z=!1,C=!1,D=!1,A=!1,h=!1,x,E;const k=[],N=document.getElementById("gameBoard_UI"),v=document.getElementById("rowsInput"),w=document.getElementById("colsInput");class O{constructor(a,b){this.x=a;this.y=b;this.j=[];this.l=this.path=this.s=!1;this.g=0;this.i=!1}A(){const a=
[-1,0,1];for(let c of a)for(let f of a){var b=this.x+c,d=this.y+f;!(0<=b&&b<m&&0<=d&&d<l)||0===c&&0===f||(0===c||0===f?this.j.push([this.x+c,this.y+f,1]):this.j.push([this.x+c,this.y+f,Math.sqrt(2)]))}}m(){let a=Infinity,b=null;for(let d of this.j){let c=k[d[0]][d[1]];c.g<a&&c.i&&(a=c.g,b=c)}return b}h(){if(G&&!q)this.l=!0,g(this.x,this.y).classList.add("start"),x=this,G=!1,C=z=!0;else if(z&&!q){E=this;g(this.x,this.y).classList.add("end");z=!1;D=!0;for(let a=0;a<m;a++)for(let b=0;b<l;b++)g(a,b).addEventListener("mouseover",
H)}}}(function(){document.getElementById("start").addEventListener("click",B);document.getElementById("buildGrid").addEventListener("click",J);document.getElementById("visualization_mode").addEventListener("input",()=>{h=!h});h=document.getElementById("visualization_mode").checked;document.body.onmousedown=y;document.body.onmousemove=y;document.body.onmouseup=y;v.addEventListener("input",L);w.addEventListener("input",M);w.value="30";v.value="30";document.getElementById("start").disabled=!0})();class n{constructor(){this.h=
[]}}n.prototype.o=function(a){this.h.push(a)};n.prototype.u=function(){return this.h.shift()};n.prototype.v=function(){return 0===this.h.length};n.prototype.length=function(){return this.h.length}})();
