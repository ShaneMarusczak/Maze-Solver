(function(){function q(a){return new Promise(b=>setTimeout(b,a))}function J(a){if(C){a=a.target;let [b,e]=[a.id.split("-")[1],a.id.split("-")[2]];h[b][e].i=!0;g(b,e).classList.add("wall")}}function g(a,b){return document.getElementById("cell-"+a+"-"+b)}function D(){E&&F&&(document.getElementById("start").removeEventListener("click",D),document.getElementById("start").disabled=!0,document.getElementById("visualization_mode").disabled=!0,document.getElementById("visualization_mode").classList.add("hidden"),
document.getElementById("vis_label").classList.add("hidden"),r=!0,K(G),k?q(m*n*2.5).then(()=>t(z)):t(z))}function t(a){a.path=!0;if(0!==a.g||a.o)a.o||(g(a.x,a.y).style.backgroundColor="cadetblue"),k?q(200).then(()=>t(a.s())):t(a.s())}function K(a){let b=1,e=new p;a.l=!0;for(e.m(a);!e.v();){b++;let d=e.u();for(let f of d.j){let c=h[f[0]][f[1]];if(2!==f[3]||!u(1,3,d))if(4!==f[3]||!u(3,5,d))if(6!==f[3]||!u(5,7,d))if(8!==f[3]||!u(7,1,d)){if(c.o)return;c.g>d.g+f[2]&&c.l&&(c.g=d.g+f[2],k&&q(3*b).then(()=>
{g(c.x,c.y).textContent=(d.g+f[2]).toString().substr(0,5)}));c.l||c.i||(c.l=!0,c.B=c.g,c.g=d.g+f[2],k&&q(2*b).then(()=>{g(c.x,c.y).textContent=(d.g+f[2]).toString().substr(0,5);g(c.x,c.y).style.backgroundColor="orange"}),g(c.x,c.y).style.fontSize="8px",e.m(c))}}}}function u(a,b,e){let d=null,f=null;for(let c of e.j)c[3]===a&&(d=h[c[0]][c[1]]),c[3]===b&&(f=h[c[0]][c[1]]);return null===d||null===f?!1:!(!d.i&&!f.i)}function L(a){!r&&v&&w&&!H&&(m=Number(x.value),n=Number(y.value),x.disabled=!0,y.disabled=
!0,a.target.classList.add("hidden"),document.getElementById("start").disabled=!1,document.getElementById("start").classList.remove("hidden"),M(),H=!0)}function N(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?(v=!0,a=document.getElementById("invalidRows"),"undefined"!=typeof a&&null!=a&&a.remove()):(v&&(a=document.createElement("p"),a.id="invalidRows",a.textContent="Valid range is 1-75 rows",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,
document.getElementById("messages").firstChild)),v=!1)}function O(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?(w=!0,a=document.getElementById("invalidCols"),"undefined"!=typeof a&&null!=a&&a.remove()):(w&&(a=document.createElement("p"),a.id="invalidCols",a.textContent="Valid range is 1-75 columns",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),w=!1)}function A(a){C=
void 0===a.buttons?1===a.which:1===a.buttons}function M(){for(let a=0;a<n;a++){h.push([]);const b=document.createElement("div");b.id="col-"+a;b.classList.add("col");b.draggable=!1;b.h=function(){return!1};P.appendChild(b);for(let e=0;e<m;e++){const d=new Q(a,e);h[a].push(d);h[a][e].A();const f=document.createElement("div");f.id="cell-"+a+"-"+e;f.classList.add("cell");b.appendChild(f);f.addEventListener("click",()=>d.h());f.addEventListener("dblclick",()=>d.m())}}}let r=!1,v=!0,w=!0,H=!1,m=30,n=30,
I=!0,B=!1,E=!1,F=!1,C=!1,k=!1,z,G;const h=[],P=document.getElementById("gameBoard_UI"),x=document.getElementById("rowsInput"),y=document.getElementById("colsInput");class Q{constructor(a,b){this.x=a;this.y=b;this.j=[];this.o=this.path=this.i=!1;this.g=0;this.l=!1}A(){const a=[-1,0,1];for(let c of a)for(let l of a){var b=this.x+c,e=this.y+l;if(0<=b&&b<n&&0<=e&&e<m&&(0!==c||0!==l)){b=this.x;e=this.y;var d=this.x+c,f=this.y+l;b=d===b&&f<e?1:d>b&&f<e?2:d>b&&f===e?3:d>b&&f>e?4:d===b&&f>e?5:d<b&&f>e?6:
d<b&&f===e?7:8;0===c||0===l?this.j.push([this.x+c,this.y+l,1,b]):this.j.push([this.x+c,this.y+l,Math.sqrt(2),b])}}}s(){let a=Infinity,b=null;for(let e of this.j){let d=h[e[0]][e[1]];d.g<a&&d.l&&(a=d.g,b=d)}return b}h(){if(I&&!r)this.o=!0,g(this.x,this.y).classList.add("start"),z=this,I=!1,E=B=!0;else if(B&&!r){G=this;g(this.x,this.y).classList.add("end");B=!1;F=!0;for(let a=0;a<n;a++)for(let b=0;b<m;b++)g(a,b).addEventListener("mouseover",J)}}m(){this.i&&(this.i=!1,g(this.x,this.y).classList.remove("wall"))}}
(function(){document.getElementById("start").addEventListener("click",D);document.getElementById("buildGrid").addEventListener("click",L);document.getElementById("visualization_mode").addEventListener("input",()=>{k=!k});k=document.getElementById("visualization_mode").checked;document.body.onmousedown=A;document.body.onmousemove=A;document.body.onmouseup=A;x.addEventListener("input",N);y.addEventListener("input",O);y.value="30";x.value="30";document.getElementById("start").disabled=!0})();class p{constructor(){this.h=
[]}}p.prototype.m=function(a){this.h.push(a)};p.prototype.u=function(){return this.h.shift()};p.prototype.v=function(){return 0===this.h.length};p.prototype.length=function(){return this.h.length}})();
