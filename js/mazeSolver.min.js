(function(){function B(a){if(u){a=a.target;let [b,c]=[a.id.split("-")[1],a.id.split("-")[2]];f[b][c].s=!0;document.getElementById("cell-"+b+"-"+c).classList.add("wall")}}function v(){if(w&&x){document.getElementById("start").removeEventListener("click",v);l=document.getElementById("start").disabled=!0;var a;a:{for(a=0;a<g;a++)for(var b=0;b<h;b++){var c=f[a][b];if(c.m){a=c;break a}}a=void 0}b=a;a=new k;b.l=!0;for(a.o(b);!a.A();){b=a.v();if(b.j)break;for(var d of b.i)c=f[d[0]][d[1]],c.l||c.s||(c.l=
!0,c.h=b.h+d[2],a.o(c))}d=y;a:{for(a=0;a<g;a++)for(b=0;b<h;b++)if(c=f[a][b],c.j){a=c;break a}a=void 0}d(a)}}function y(a){console.log(a);0!==a.h&&(a.j||(document.getElementById("cell-"+a.x+"-"+a.y).style.backgroundColor="cadetblue"),y(a.u()))}function r(a){u=void 0===a.buttons?1===a.which:1===a.buttons}function C(){for(let a=0;a<g;a++){f.push([]);const b=document.createElement("div");b.id="col-"+a;b.classList.add("col");b.draggable=!1;b.g=function(){return!1};D.appendChild(b);for(let c=0;c<h;c++){const d=
new E(a,c);f[a].push(d);f[a][c].B();const e=document.createElement("div");e.id="cell-"+a+"-"+c;e.classList.add("cell");b.appendChild(e);e.addEventListener("click",()=>d.g())}}}let l=!1,m=!0,n=!0,z=!1,h=30,g=30,A=!0,t=!1,w=!1,x=!1,u=!1;const f=[],D=document.getElementById("gameBoard_UI"),p=document.getElementById("rowsInput"),q=document.getElementById("colsInput");class E{constructor(a,b){this.x=a;this.y=b;this.i=[];this.m=this.j=this.s=!1;this.h=0;this.l=!1}B(){const a=[-1,0,1];for(let d of a)for(let e of a){var b=
this.x+d,c=this.y+e;!(0<=b&&b<g&&0<=c&&c<h)||0===d&&0===e||(0===d||0===e?this.i.push([this.x+d,this.y+e,1]):this.i.push([this.x+d,this.y+e,Math.sqrt(2)]))}}u(){let a=9999999,b=null;for(let c of this.i){let d=f[c[0]][c[1]];d.h<a&&d.l&&(a=d.h,b=d)}return b}g(){if(A&&!l)this.j=!0,document.getElementById("cell-"+this.x+"-"+this.y).classList.add("start"),A=!1,w=t=!0;else if(t&&!l){this.m=!0;document.getElementById("cell-"+this.x+"-"+this.y).classList.add("end");t=!1;x=!0;for(let a=0;a<g;a++)for(let b=
0;b<h;b++)document.getElementById("cell-"+a+"-"+b).addEventListener("mouseover",B)}}}document.getElementById("start").addEventListener("click",v);document.getElementById("buildGrid").addEventListener("click",function(a){!l&&m&&n&&!z&&(h=Number(p.value),g=Number(q.value),p.disabled=!0,q.disabled=!0,a.target.classList.add("hidden"),document.getElementById("start").disabled=!1,document.getElementById("start").classList.remove("hidden"),C(),z=!0)});document.body.onmousedown=r;document.body.onmousemove=
r;document.body.onmouseup=r;p.addEventListener("input",function(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?(m=!0,a=document.getElementById("invalidRows"),"undefined"!=typeof a&&null!=a&&a.remove()):(m&&(a=document.createElement("p"),a.id="invalidRows",a.textContent="Valid range is 1-75 rows",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),m=!1)});q.addEventListener("input",
function(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?(n=!0,a=document.getElementById("invalidCols"),"undefined"!=typeof a&&null!=a&&a.remove()):(n&&(a=document.createElement("p"),a.id="invalidCols",a.textContent="Valid range is 1-75 columns",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),n=!1)});q.value="30";p.value="30";document.getElementById("start").disabled=
!0;class k{constructor(){this.g=[]}}k.prototype.o=function(a){this.g.push(a)};k.prototype.v=function(){return this.g.shift()};k.prototype.A=function(){return 0===this.g.length};k.prototype.length=function(){return this.g.length}})();
