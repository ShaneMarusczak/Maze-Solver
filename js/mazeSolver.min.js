(function(){function p(a){return new Promise(b=>setTimeout(b,a))}function H(a){if(z){a=a.target;let [b,c]=[a.id.split("-")[1],a.id.split("-")[2]];h[b][c].u=!0;g(b,c).classList.add("wall")}}function g(a,b){return document.getElementById("cell-"+a+"-"+b)}function A(){B&&C&&(document.getElementById("start").removeEventListener("click",A),document.getElementById("start").disabled=!0,document.getElementById("visualization_mode").disabled=!0,document.getElementById("visualization_mode").classList.add("hidden"),
document.getElementById("vis_label").classList.add("hidden"),q=!0,I(D()),k?p(l*m*3).then(()=>r(E())):r(E()))}function r(a){if(0!==a.g||a.j){a.j||(g(a.x,a.y).style.backgroundColor="cadetblue");a=a.v();var b=null,c=Infinity;for(let d of a)d.o()<c&&(b=d,c=d.o());k?p(200).then(()=>r(b)):r(a[0])}}function I(a){let b=1,c=new n;a.i=!0;for(c.s(a);!c.B();){b++;let d=c.A();for(let f of d.l){let e=h[f[0]][f[1]];if(e.j)return;e.g>d.g+f[2]&&e.i&&(e.g=d.g+f[2],k&&p(3*b).then(()=>{g(e.x,e.y).textContent=(d.g+f[2]).toString().substr(0,
5)}));e.i||e.u||(e.i=!0,e.D=e.g,e.g=d.g+f[2],k&&p(2*b).then(()=>{g(e.x,e.y).textContent=(d.g+f[2]).toString().substr(0,5);g(e.x,e.y).style.backgroundColor="orange"}),g(e.x,e.y).style.fontSize="8px",c.s(e))}}}function J(a){!q&&t&&u&&!F&&(l=Number(v.value),m=Number(w.value),v.disabled=!0,w.disabled=!0,a.target.classList.add("hidden"),document.getElementById("start").disabled=!1,document.getElementById("start").classList.remove("hidden"),K(),F=!0)}function L(a){/^\d{0,2}$/.test(a.target.value)&&75>=
Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?(t=!0,a=document.getElementById("invalidRows"),"undefined"!=typeof a&&null!=a&&a.remove()):(t&&(a=document.createElement("p"),a.id="invalidRows",a.textContent="Valid range is 1-75 rows",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),t=!1)}function M(a){/^\d{0,2}$/.test(a.target.value)&&75>=Number(a.target.value)&&0<Number(a.target.value)&&""!==a.target.value?
(u=!0,a=document.getElementById("invalidCols"),"undefined"!=typeof a&&null!=a&&a.remove()):(u&&(a=document.createElement("p"),a.id="invalidCols",a.textContent="Valid range is 1-75 columns",a.classList.add("bad"),document.getElementById("messages").insertBefore(a,document.getElementById("messages").firstChild)),u=!1)}function D(){for(let a=0;a<m;a++)for(let b=0;b<l;b++){const c=h[a][b];if(c.m)return c}}function E(){for(let a=0;a<m;a++)for(let b=0;b<l;b++){const c=h[a][b];if(c.j)return c}}function x(a){z=
void 0===a.buttons?1===a.which:1===a.buttons}function K(){for(let a=0;a<m;a++){h.push([]);const b=document.createElement("div");b.id="col-"+a;b.classList.add("col");b.draggable=!1;b.h=function(){return!1};N.appendChild(b);for(let c=0;c<l;c++){const d=new O(a,c);h[a].push(d);h[a][c].C();const f=document.createElement("div");f.id="cell-"+a+"-"+c;f.classList.add("cell");b.appendChild(f);f.addEventListener("click",()=>d.h())}}}let q=!1,t=!0,u=!0,F=!1,l=30,m=30,G=!0,y=!1,B=!1,C=!1,z=!1,k=!1;const h=[],
N=document.getElementById("gameBoard_UI"),v=document.getElementById("rowsInput"),w=document.getElementById("colsInput");class O{constructor(a,b){this.x=a;this.y=b;this.l=[];this.m=this.j=this.u=!1;this.g=0;this.i=!1}C(){const a=[-1,0,1];for(let d of a)for(let f of a){var b=this.x+d,c=this.y+f;!(0<=b&&b<m&&0<=c&&c<l)||0===d&&0===f||(0===d||0===f?this.l.push([this.x+d,this.y+f,1]):this.l.push([this.x+d,this.y+f,Math.sqrt(2)]))}}o(){var a=D(),b=this.x,c=this.y,d=a.x;a=a.y;return Math.sqrt((d-b)*(d-b)+
(a-c)*(a-c))}v(){let a=Infinity,b=[];for(let c of this.l){let d=h[c[0]][c[1]];d.g<a&&d.i?(b=[],b.push(d),a=d.g):d.g===a&&d.i&&b.push(d)}return b}h(){if(G&&!q)this.j=!0,g(this.x,this.y).classList.add("start"),G=!1,B=y=!0;else if(y&&!q){this.m=!0;g(this.x,this.y).classList.add("end");y=!1;C=!0;for(let a=0;a<m;a++)for(let b=0;b<l;b++)g(a,b).addEventListener("mouseover",H)}}}(function(){document.getElementById("start").addEventListener("click",A);document.getElementById("buildGrid").addEventListener("click",
J);document.getElementById("visualization_mode").addEventListener("input",()=>{k=!k});k=document.getElementById("visualization_mode").checked;document.body.onmousedown=x;document.body.onmousemove=x;document.body.onmouseup=x;v.addEventListener("input",L);w.addEventListener("input",M);w.value="30";v.value="30";document.getElementById("start").disabled=!0})();class n{constructor(){this.h=[]}}n.prototype.s=function(a){this.h.push(a)};n.prototype.A=function(){return this.h.shift()};n.prototype.B=function(){return 0===
this.h.length};n.prototype.length=function(){return this.h.length}})();
